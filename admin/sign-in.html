<style>
    #sign-in {
        width: 600px;
        max-width: 100%;
        margin: 25px auto;
        padding: 10px;
    }
    body {
        background-image: url(https://s-media-cache-ak0.pinimg.com/originals/03/95/6f/03956fed74537b3d7b0858e9a814748d.jpg);
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-color: #ffffff;
    }
</style>

<script>
    $(document).ready(function () {
        var form = $("#sign-in").find("form");
        $(form).form({
            fields: {
                username: {
                    identifier: 'username',
                    rules: [
                        {
                            type: 'empty',
                            prompt: 'Username Obbligatorio'
                        }
                    ]
                },
                password: {
                    identifier: 'password',
                    rules: [
                        {
                            type: 'empty',
                            prompt: 'Password Obbligatoria'
                        },
                        {
                            type: 'minLength[6]',
                            prompt: 'Lunghezza password minimo 6 caratteri'
                        }
                    ]
                }
            },
            onSuccess: function () {
                return submitSignInForm(form);
            }
        });
    });
    function submitSignInForm(form) {
        //Send Data for Validation
        $(form).addClass("loading");
        var username = $(form).find('input[name=username]').val();
        var password = $(form).find('input[name=password]').val();
        var url = "/common/php/administrator.php";
        $.ajax({
            type: 'POST',
            url: url,
            data: {
                type: 1,
                username: username,
                password: password
            },
            success: function (data) {
                $(form).removeClass("loading");
                var message = $("#message-sign-in");
                if (data.status) {
                    $(message).removeClass("error").addClass("success");
                    $(message).find("i").removeClass().addClass("checkmark icon");
                    $(message).find("span").html(data.message + ' - Redirecting in <span id="redirect-timeout"></span>');
                    redirect(3, $("message-sign-in #redirect-timeout"), "index.php");
                } else {
                    $(message).removeClass("success").addClass("error");
                    $(message).find("i").removeClass().addClass("remove icon");
                    $(message).find("span").html(data.message);
                }
                console.info("[AUTHENTICATION]: " + data.message);
            }, error: function (jqXHR, status, error) {
                console.error("[AUTHENTICATION]: " + error);
            }
        });
        return false;
    }
    function redirect(timeOut, component, target) {
        $(component).html(timeOut);
        setTimeout(countDown, 1000);
        function countDown() {
            timeOut--;
            if (timeOut > 0)
                setTimeout(countDown, 1000);
            else
                window.location.href = target;
            $(component).html(timeOut);
        }
    }
</script>

<div id="sign-in">
    <form class="ui attached form segment large" action="#">
        <h1 class="ui horizontal divider header">
            <i class="shield icon"></i>
            Admin | Sign In
        </h1>
        <div class="field">
            <label>Username</label>
            <div class="ui left icon input">
                <input type="text" name="username" placeholder="Username" autocomplete="off" required>
                <i class="user icon"></i>
            </div>
        </div>
        <div class="field">
            <label>Password</label>
            <div class="ui left icon input">
                <input type="password" name="password" placeholder="Password" autocomplete="off" required>
                <i class="lock icon"></i>
            </div>
        </div>
        <button class="ui animated fade teal fluid big button" type="submit" tabindex="0">
            <div class="visible content">Submit</div>
            <div class="hidden content">
                <i class="send icon"></i>
            </div>
        </button>
        <div class="ui error message"></div>
    </form>
    <div id="message-sign-in" class="ui large bottom attached message">
        <i class="send icon"></i>
        <span>Inserisci le credenziali per essere autenticato</span>
    </div>
</div>